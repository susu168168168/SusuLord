# 苏苏领主 - 产品需求文档 (PRD)

**版本**: 1.0
**日期**: 2025-12-31
**状态**: 初稿

---

## 1. 产品概述

### 1.1 产品名称
苏苏领主 (SusuLord)

### 1.2 产品定位
一款基于真实地理位置（LBS）的末日生存题材手机游戏，玩家通过真实行走来圈地占领、探索搜刮、建造发展，在废土世界中重建家园。

### 1.3 产品愿景
让玩家用双脚丈量真实世界，在虚拟与现实融合的游戏体验中，获得运动的乐趣和生存建设的成就感。

### 1.4 核心价值主张
- **Walk to Earn**: 走路即收益，将运动转化为游戏资源
- **真实地图融合**: 基于真实地理位置的沉浸式体验
- **社交互动**: 基于位置的玩家交易与通讯系统
- **轻度生存**: 有压力但不重度的生存体验

---

## 2. 目标用户

### 2.1 用户画像

| 维度 | 描述 |
|------|------|
| 年龄 | 18-35岁 |
| 性别 | 男女均衡，略偏男性 |
| 地区 | 全球，重点关注一二线城市用户 |
| 特征 | 喜欢户外运动、对LBS游戏感兴趣、有生存游戏经验 |

### 2.2 用户需求

| 需求类型 | 具体需求 |
|----------|----------|
| 功能需求 | 有趣的游戏机制激励外出运动 |
| 情感需求 | 领地所有权带来的成就感与归属感 |
| 社交需求 | 与附近玩家交流互动的能力 |
| 竞争需求 | 排行榜展示个人成就 |

### 2.3 使用场景
- 日常通勤路上探索搜刮
- 周末户外运动时圈地占领
- 闲暇时间管理领地和建筑
- 与附近玩家进行资源交易

---

## 3. 功能需求

### 3.1 功能模块总览

```
┌─────────────────────────────────────────────────────────────┐
│                      核心功能架构                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   登录系统 → GPS圈地 → POI探索 → 资源获取                    │
│      ↑                              ↓                       │
│      │         ┌──────────────────────────────┐            │
│      │         │  资源用途：                    │            │
│      │         │  • 建造建筑（消耗资源）         │            │
│      │         │  • 交易换物（流通资源）         │            │
│      │         │  • 生存消耗（食物/水）          │            │
│      │         └──────────────────────────────┘            │
│      │                              ↓                       │
│      └──────── 通讯社交 ← 成就排行 ← 领地发展               │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 功能需求详细列表

#### 模块一：用户系统

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|----------|--------|------|
| F1.1 | 邮箱注册登录 | P0 | 支持邮箱+密码的传统注册登录方式 |
| F1.2 | Apple登录 | P0 | 支持Sign in with Apple一键登录 |
| F1.3 | Google登录 | P0 | 支持Google OAuth登录 |
| F1.4 | 会话管理 | P0 | 自动登录、登出、多设备管理 |
| F1.5 | 密码重置 | P1 | 邮箱验证码重置密码 |

#### 模块二：GPS圈地系统

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|----------|--------|------|
| F2.1 | 实时GPS追踪 | P0 | 获取用户实时位置并在地图显示 |
| F2.2 | 轨迹绘制 | P0 | 用户移动时实时绘制蓝色轨迹线 |
| F2.3 | 多边形闭合 | P0 | 回到起点附近自动闭合成多边形 |
| F2.4 | 面积计算 | P0 | 自动计算圈定区域面积 |
| F2.5 | 合法性验证 | P0 | 检测作弊、领地重叠等 |
| F2.6 | 领地确认 | P0 | 验证通过后确认领地归属 |

#### 模块三：领地管理

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|----------|--------|------|
| F3.1 | 领地详情 | P0 | 展示领地名称、面积、建筑数量 |
| F3.2 | 领地命名 | P1 | 给领地自定义名称 |
| F3.3 | 交易开关 | P1 | 设置是否允许在领地范围内交易 |
| F3.4 | 领地列表 | P0 | 查看所有拥有的领地 |

#### 模块四：POI探索与搜刮

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|----------|--------|------|
| F4.1 | POI发现 | P0 | 进入真实地点范围时自动识别 |
| F4.2 | POI类型识别 | P0 | 识别餐厅、超市、医院等类型 |
| F4.3 | 搜刮功能 | P0 | 点击搜刮获得对应类型资源 |
| F4.4 | 探索成就 | P1 | 记录探索距离、时长、发现数量 |
| F4.5 | 冷却机制 | P0 | 同一POI有搜刮冷却时间 |

**POI类型与资源对应关系：**

| POI类型 | 产出资源 |
|---------|----------|
| 医院/药店 | 药品（急救包、抗生素） |
| 超市/餐厅 | 食物（罐头、饮用水） |
| 工厂/工地 | 金属材料 |
| 公园/林地 | 木材 |
| 银行/珠宝店 | 稀有材料 |

#### 模块五：背包系统

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|----------|--------|------|
| F5.1 | 背包容量 | P0 | 默认100格，可通过仓库扩展 |
| F5.2 | 物品展示 | P0 | 展示物品图标、名称、数量 |
| F5.3 | 物品分类 | P1 | 按类型筛选物品 |
| F5.4 | 物品使用 | P0 | 使用消耗类物品（食物、药品） |
| F5.5 | 本地缓存 | P0 | 离线状态下可查看和使用 |

#### 模块六：建造系统

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|----------|--------|------|
| F6.1 | 建筑列表 | P0 | 展示所有可建造建筑及需求资源 |
| F6.2 | 建筑分类 | P1 | 生存、储存、生产、能源四类 |
| F6.3 | 资源检查 | P0 | 建造前检查资源是否充足 |
| F6.4 | 位置选择 | P1 | 在领地内选择建筑位置 |
| F6.5 | 建造执行 | P0 | 扣除资源，创建建筑 |
| F6.6 | 建筑等级 | P1 | Tier1→Tier2→Tier3升级体系 |

**建筑类型：**

| 分类 | 建筑名称 | 功能 |
|------|----------|------|
| 生存 | 篝火 | 取暖，减缓状态下降 |
| 生存 | 庇护所 | 休息，恢复生命 |
| 储存 | 小仓库 | 扩展背包容量 |
| 储存 | 中仓库 | 更大容量扩展 |
| 生产 | 农田 | 定时产出食物 |
| 生产 | 工作台 | 物品合成 |
| 能源 | 太阳能板 | 提供电力 |
| 能源 | 风力发电机 | 提供电力 |

#### 模块七：建筑状态管理

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|----------|--------|------|
| F7.1 | 状态机 | P0 | 建造中→待激活→运行中→损坏 |
| F7.2 | 升级功能 | P1 | 消耗资源升级建筑等级 |
| F7.3 | 维修功能 | P1 | 修复损坏建筑 |
| F7.4 | 拆除功能 | P2 | 拆除建筑返还部分资源 |

#### 模块八：交易系统

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|----------|--------|------|
| F8.1 | 发布挂单 | P0 | 选择提供物品和需求物品 |
| F8.2 | 挂单列表 | P0 | 查看附近玩家的挂单 |
| F8.3 | 交易确认 | P0 | 接受挂单完成物品交换 |
| F8.4 | 位置限制 | P0 | 100米范围内才能发现和交易 |
| F8.5 | 交易历史 | P1 | 查看历史交易记录 |

#### 模块九：消息中心

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|----------|--------|------|
| F9.1 | 系统消息 | P0 | 接收官方公告和活动通知 |
| F9.2 | 生存指南 | P1 | 新手引导消息 |
| F9.3 | 每日任务 | P1 | 每日任务通知 |
| F9.4 | 消息列表 | P0 | 消息分类展示 |

#### 模块十：公共频道聊天

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|----------|--------|------|
| F10.1 | 公共频道 | P0 | 3km范围内的公共聊天室 |
| F10.2 | 实时消息 | P0 | 消息实时推送无需刷新 |
| F10.3 | 发送消息 | P0 | 发送文字消息 |
| F10.4 | 消息历史 | P1 | 查看历史消息 |

#### 模块十一：频道管理

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|----------|--------|------|
| F11.1 | 频道列表 | P0 | 浏览可加入的频道 |
| F11.2 | 创建频道 | P1 | 创建私人频道 |
| F11.3 | 加入/退出 | P0 | 加入或退出频道 |
| F11.4 | 频道信息 | P1 | 显示在线人数、距离等 |

#### 模块十二：PTT语音呼叫

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|----------|--------|------|
| F12.1 | PTT发送 | P1 | 长按说话松开发送 |
| F12.2 | 频率选择 | P1 | 选择公共或私人频率 |
| F12.3 | 语音接收 | P1 | 实时接收其他玩家语音 |

#### 模块十三：通讯设备等级

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|----------|--------|------|
| F13.1 | 设备等级 | P0 | 收音机→对讲机→营地电台→卫星通讯 |
| F13.2 | 范围限制 | P0 | 不同设备不同通讯范围 |
| F13.3 | 功能限制 | P0 | 低级设备只能收不能发 |
| F13.4 | 设备升级 | P1 | 消耗资源升级设备 |

**设备等级体系：**

| 设备 | 收听 | 发送 | 范围 |
|------|------|------|------|
| 收音机 | ✓ | ✗ | - |
| 对讲机 | ✓ | ✓ | 3km |
| 营地电台 | ✓ | ✓ | 10km |
| 卫星通讯 | ✓ | ✓ | 全球 |

#### 模块十四：个人主页

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|----------|--------|------|
| F14.1 | 玩家档案 | P0 | 展示等级、存活天数等 |
| F14.2 | 领地统计 | P0 | 领地数量、总面积 |
| F14.3 | 建筑统计 | P1 | 建筑数量 |
| F14.4 | 头像昵称 | P1 | 自定义头像和昵称 |

#### 模块十五：多语言支持

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|----------|--------|------|
| F15.1 | 语言设置 | P0 | 支持语言切换 |
| F15.2 | 简体中文 | P0 | 默认语言 |
| F15.3 | 繁体中文 | P1 | 港澳台用户 |
| F15.4 | English | P0 | 海外用户 |

#### 模块十六：付费订阅系统

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|----------|--------|------|
| F16.1 | 订阅展示 | P0 | 展示订阅方案和权益 |
| F16.2 | 订阅购买 | P0 | StoreKit 2支付 |
| F16.3 | 订阅管理 | P0 | 查看和取消订阅 |
| F16.4 | 资源包购买 | P0 | 一次性内购商品 |

**付费方案：**

| 方案 | 价格 | 权益 |
|------|------|------|
| 开拓者月卡 | $9.99/月 | 无限探索、范围扩大 |
| 领主通行证 | $19.99/月 | 所有特权 |
| 初级物资包 | $0.99 | 基础资源 |
| 中级物资包 | $2.99 | 中级资源 |
| 稀有资源包 | $9.99 | 稀有资源 |

#### 模块十七：排行榜

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|----------|--------|------|
| F17.1 | 领地面积榜 | P0 | 按总领地面积排名 |
| F17.2 | 探索废墟榜 | P0 | 按探索次数排名 |
| F17.3 | 建筑数量榜 | P0 | 按建筑数量排名 |
| F17.4 | 个人排名 | P0 | 显示自己的排名 |

#### 模块十八：成就系统

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|----------|--------|------|
| F18.1 | 成就列表 | P0 | 展示所有成就及完成状态 |
| F18.2 | 成就解锁 | P0 | 达成条件自动解锁 |
| F18.3 | 成就奖励 | P0 | 解锁成就获得金币奖励 |
| F18.4 | 成就进度 | P1 | 显示总体完成百分比 |

**成就稀有度：** 普通 → 稀有 → 史诗 → 传说

#### 模块十九：生存体征

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|----------|--------|------|
| F19.1 | 核心生命值 | P0 | 0-100，降为0则死亡 |
| F19.2 | 饱食度 | P0 | 随时间下降，需要吃食物 |
| F19.3 | 水分 | P0 | 随时间下降，需要喝水 |
| F19.4 | 状态增益 | P1 | 饱食度/水分>80%时获得增益 |
| F19.5 | 惩罚机制 | P0 | 过低会掉血 |

**衰减规则：**
- 饱食度：-5/小时
- 水分：-10/小时

---

## 4. 非功能需求

### 4.1 性能需求

| 指标 | 要求 |
|------|------|
| 启动时间 | < 3秒 |
| GPS响应 | < 1秒 |
| 界面切换 | < 0.5秒 |
| 实时消息延迟 | < 2秒 |
| 排行榜查询 | < 1秒 |

### 4.2 可靠性需求

| 指标 | 要求 |
|------|------|
| 服务可用性 | 99.9% |
| 数据备份 | 每日备份 |
| 崩溃率 | < 0.1% |

### 4.3 安全需求

| 类别 | 措施 |
|------|------|
| 用户认证 | OAuth 2.0 + JWT |
| 数据传输 | HTTPS加密 |
| 密码存储 | bcrypt哈希 |
| 反作弊 | GPS轨迹验证、速度检测 |

### 4.4 兼容性需求

| 平台 | 版本要求 |
|------|----------|
| iOS | iOS 15.0+ |
| 设备 | iPhone 8及以上 |

---

## 5. 技术架构

### 5.1 技术栈

| 层级 | 技术选型 |
|------|----------|
| 前端框架 | SwiftUI |
| 地图服务 | Apple MapKit |
| 后端服务 | Supabase |
| 数据库 | PostgreSQL + PostGIS |
| 实时通讯 | Supabase Realtime |
| 用户认证 | Supabase Auth |
| 支付系统 | StoreKit 2 |

### 5.2 核心代码模块

| 功能 | 核心文件 |
|------|----------|
| 登录注册 | AuthManager.swift |
| GPS圈地 | LocationManager.swift |
| 领地管理 | TerritoryManager.swift |
| POI发现 | POIManager.swift |
| 探索搜刮 | ExplorationManager.swift |
| 背包系统 | ItemManager.swift |
| 建造系统 | BuildingManager.swift |
| 交易系统 | TradeManager.swift |
| 消息中心 | RadioManager.swift |
| 实时聊天 | CommunicationManager.swift |
| 频道管理 | ChannelManager.swift |
| 内购支付 | StoreKitManager.swift |
| 排行榜 | LeaderboardManager.swift |
| 成就系统 | AchievementManager.swift |
| 生存体征 | VitalSignsManagerV2.swift |

---

## 6. 商业模式

### 6.1 收入来源

| 类型 | 描述 | 预估占比 |
|------|------|----------|
| 订阅收入 | 月卡/通行证 | 60% |
| 一次性内购 | 资源包 | 30% |
| 广告收入 | 激励视频广告 | 10% |

### 6.2 关键指标

| 指标 | 目标值 |
|------|--------|
| 日活跃用户(DAU) | 10,000+ |
| 次日留存率 | 40%+ |
| 7日留存率 | 20%+ |
| 付费转化率 | 5%+ |
| ARPU | $2+ |

---

## 7. 里程碑

| 阶段 | 交付内容 |
|------|----------|
| MVP | 登录 + GPS圈地 + 领地管理 |
| V1.0 | + POI探索 + 背包 + 建造 |
| V1.5 | + 交易 + 通讯系统 |
| V2.0 | + 成就 + 排行榜 + 付费系统 |
| V2.5 | + 生存体征 + 多语言 |

---

## 8. 风险与对策

| 风险 | 影响 | 对策 |
|------|------|------|
| GPS精度不足 | 圈地体验差 | 增加容错机制，降低精度要求 |
| 用户作弊 | 破坏公平性 | 多维度反作弊检测 |
| 后端成本过高 | 运营压力 | 采用Supabase免费额度+按需扩容 |
| 冷启动问题 | 社交功能无用 | 添加NPC交互，增加单人玩法 |

---

**文档结束**
